spring:
  datasource:
    url: jdbc:oracle:thin:@//localhost:1521/ORCLPDB1
    username: cm3int
    password: ${ORACLE_PASSWORD:cm3int}
    driver-class-name: oracle.jdbc.OracleDriver
    hikari:
      maximum-pool-size: 5
      minimum-idle: 2
      connection-timeout: 30000
      idle-timeout: 600000
      max-lifetime: 1800000
      leak-detection-threshold: 60000

  liquibase:
    change-log: classpath:db/changelog/test-changelog-master.xml
    contexts: integration
    drop-first: false
    enabled: true
    default-schema: cm3int

  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.Oracle19cDialect
        format_sql: true
        show_sql: false
    hibernate:
      ddl-auto: none

# Audit system configuration for integration tests
audit:
  database:
    table-prefix: Test_
    batch-size: 50
    connection-pool-size: 5
  retention:
    days: 30
  reconciliation:
    auto-generate: false
    schedule: "0 0 6 * * ?"
  dashboard:
    page-size: 20
    max-export-records: 1000

# SpringDoc OpenAPI configuration for integration tests
springdoc:
  api-docs:
    enabled: true
    path: /v3/api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
    operationsSorter: method
    tagsSorter: alpha
    tryItOutEnabled: true
    filter: true
  group-configs:
    - group: audit-system
      paths-to-match: /api/audit/**
      display-name: Audit System API

# Logging configuration for integration tests
logging:
  level:
    com.company.audit: DEBUG
    org.springframework.jdbc: DEBUG
    liquibase: INFO
    org.springdoc: DEBUG
    org.springframework.web: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level [%X{correlationId}] %logger{36} - %msg%n"

# Management endpoints for integration testing
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,liquibase
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      simple:
        enabled: true

# Security configuration for integration tests
security:
  oauth2:
    resourceserver:
      jwt:
        issuer-uri: http://localhost:8080/auth/realms/audit-system
        jwk-set-uri: http://localhost:8080/auth/realms/audit-system/protocol/openid-connect/certs
  audit:
    roles:
      viewer: AUDIT_VIEWER
      admin: AUDIT_ADMIN

# Test-specific configuration
test:
  database:
    cleanup-enabled: true
    performance-test-records: 100
  correlation-id:
    thread-pool-size: 3
    test-timeout-seconds: 10
  swagger:
    validation-enabled: true
    documentation-check-enabled: true